# ToDo - пополняется в процессе работы, чтобы ничего не забыть

- [ ] Импорт
    - [x] Базовый маппер входящей инфы
    - [x] Базовый редьюсер в коллекции
    - [x] Приоритезация коллекций (осуществляется на основании реляций, объявленных в колонках)
    - [x] Препроцессинг перед маппингом(name=>id например)
    - [x] Компоновка searchQueries
    - [x] map AbstractEntity => model
    - [ ] Поддержка свойств
    - [x] Поддержка связей
    - [x] Сохранение в базу
    - [ ] XLS / XLSX
- [ ] Глобавльные пре и пост мапперы для колонок, привязанные к (Document2D -> processRow)
    - [ ] Документу
    - [ ] Схеме
- [ ] Корректировка ошибок
    - [ ] Привести исключения к базовому классу
    - [ ] Логировать исключения и предупреждения
    - [ ] Ловить исключения, отслеживая стадию
    - [ ] Возобновления таска с необходимой стадии, с новой конфигурацией
- [ ] Обработка дубликатов сущностей(стадия reduceDoc)
    - [ ] ON_DUPLICATE_NEW - при дубликате очищать pk и создавать новую запись
    - [ ] ON_DUPLICATE_MERGE - мержить вторую запись с первой, перетирая все установленные атрибуты
    - [ ] ON_DUPLICATE_MERGE_NOT_FILLED - мержить вторую запись с первой, 
          но перетирать только неустановленные ранее атрибуты
- [ ] Опция как обрабатывать документы - ImportTask::run
    - [ ] Все документы по отдельности
    - [ ] Все документы редьюсим в одну пачку коллекций
- [ ] Опция как обрабатывать конкретный Document2D - ImportTask::run
    - [ ] по листам (только если документы обрабатываются по отдельности)
    - [ ] сразу мержить всё в единые коллекции(сейчас так)
- [ ] Стандартые мапперы значений - DevGroup\FlexIntegration\abstractEntity\mappers
    - [ ] LowercaseString
    - [ ] Map value to dict - маппит значение в значение из словаря
    - [ ] Capitalization - Заглавная буква
        - [ ] Только первый символ строки
        - [ ] Каждое слово в строке (CamelCase)
    - [ ] To Timestamp
        - [ ] через strtotime
        - [ ] через формат
    - [ ] Timestamp -> Date
        - [ ] Указывается формат
        - [ ] Сдвиг временных зон?
        - [ ] Форсить время, например 00:00:00
    - [ ] Применить математическое выражение
        - [ ] Reference 1: https://github.com/andig/php-shunting-yard
        - [ ] Reference 2: https://packagist.org/packages/hoa/math
        - [ ] Понимать ссылки на другие колонки?
    - [ ] Хитрое округление числового значения (до двух сотен в большую сторону например: 1030 => 1200)
- [ ] Мапперы для reduce стадии
    - [ ] Use case: перемножение двух колонок и запись в одну колонку
- [ ] Unbinded column - колонка, не привязанная к атрибуту, но которая может использоваться в мат выражениях
- [ ] Хранение конфигурации тасков
    - [ ] БД
    - [ ] Файлы
        - [ ] JSON
        - [ ] XML
        - [ ] YAML
- [ ] Интерфейс
- [ ] Фоновая обработка - консольная команда